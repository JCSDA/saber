# Module type_ens

| Type | Name | Purpose | Arguments |     | Type | Intent |
| :--: | :--: | :------ | ----: | :-------- | :--: | :----: |
| subroutine | [ens_set_att](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L72) | set attributes | **ens**<br>**ne**<br>**nsub** |  Ensemble<br> Ensemble size<br> Number of sub-ensembles | class(ens_type)<br>integer<br>integer | inout<br>in<br>in |
| subroutine | [ens_alloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L91) | allocation | **ens**<br>**ne**<br>**nsub** |  Ensemble<br> Ensemble size<br> Number of sub-ensembles | class(ens_type)<br>integer<br>integer | inout<br>in<br>in |
| subroutine | [ens_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L113) | release memory | **ens** |  Ensemble | class(ens_type) | inout |
| subroutine | [ens_copy](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L149) | copy | **ens_out**<br>**mpl**<br>**nam**<br>**geom**<br>**ens_in** |  Output ensemble<br> MPI data<br> Namelist<br> Geometry<br> Input ensemble | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>type(ens_type) | inout<br>inout<br>in<br>in<br>in |
| subroutine | [ens_compute_mean](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L196) | compute ensemble mean(s) | **ens**<br>**mpl**<br>**nam**<br>**geom** |  Ensemble<br> MPI data<br> Namelist<br> Geometry | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type) | inout<br>inout<br>in<br>in |
| subroutine | [ens_compute_moments](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L230) | compute 2nd- and 4th-order centered moments | **ens**<br>**mpl**<br>**nam**<br>**geom** |  Ensemble<br> MPI data<br> Namelist<br> Geometry | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type) | inout<br>inout<br>in<br>in |
| subroutine | [ens_normalize](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L280) | normalize ensemble members as perturbations (zero mean) with unit variance | **ens**<br>**mpl**<br>**nam**<br>**geom** |  Ensemble<br> MPI data<br> Namelist<br> Geometry | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type) | inout<br>inout<br>in<br>in |
| subroutine | [ens_get_c0_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L334) | get ensemble field on subset Sc0, single field | **ens**<br>**mpl**<br>**iv**<br>**geom**<br>**fieldtype**<br>**i**<br>**fld_c0a** |  Ensemble<br> MPI data<br> Variable index<br> Geometry<br> Field type ('member', 'pert', 'mean', 'm2' or 'm4')<br> Index (member or subset)<br> Field on Sc0 subset, halo A | class(ens_type)<br>type(mpl_type)<br>integer<br>type(geom_type)<br>character(len=*)<br>integer<br>real(kind_real) | in<br>inout<br>in<br>in<br>in<br>in<br>out |
| subroutine | [ens_get_c0_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L426) | get ensemble field on subset Sc0, all field | **ens**<br>**mpl**<br>**nam**<br>**geom**<br>**fieldtype**<br>**i**<br>**fld_c0a** |  Ensemble<br> MPI data<br> Namelist<br> Geometry<br> Field type ('member', 'pert', 'mean', 'm2' or 'm4')<br> Index (member or subset)<br> Field on Sc0 subset, halo A | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>character(len=*)<br>integer<br>real(kind_real) | in<br>inout<br>in<br>in<br>in<br>in<br>out |
| subroutine | [ens_set_c0_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L453) | set ensemble member on subset Sc0, single field | **ens**<br>**mpl**<br>**iv**<br>**geom**<br>**fieldtype**<br>**i**<br>**fld_c0a** |  Ensemble<br> MPI data<br> Variable index<br> Geometry<br> Field type ('member', 'pert', 'mean', 'm2' or 'm4')<br> Index (member or subset)<br> Field on Sc0 subset, halo A | class(ens_type)<br>type(mpl_type)<br>integer<br>type(geom_type)<br>character(len=*)<br>integer<br>real(kind_real) | inout<br>inout<br>in<br>in<br>in<br>in<br>in |
| subroutine | [ens_set_c0_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L546) | get ensemble member or perturbation on subset Sc0, all field | **ens**<br>**mpl**<br>**nam**<br>**geom**<br>**fieldtype**<br>**i**<br>**fld_c0a** |  Ensemble<br> MPI data<br> Namelist<br> Geometry<br> Field type ('member', 'pert', 'mean', 'm2' or 'm4')<br> Index (member or subset)<br> Field on Sc0 subset, halo A | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>character(len=*)<br>integer<br>real(kind_real) | inout<br>inout<br>in<br>in<br>in<br>in<br>in |
| subroutine | [ens_apply_bens](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L571) | apply raw ensemble covariance | **ens**<br>**mpl**<br>**nam**<br>**geom**<br>**fld** |  Ensemble<br> MPI data<br> Namelist<br> Geometry<br> Field | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>real(kind_real) | in<br>inout<br>in<br>in<br>inout |
| subroutine | [ens_apply_bens_dirac](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L630) | apply raw ensemble covariance to a Dirac (faster formulation) | **ens**<br>**mpl**<br>**nam**<br>**geom**<br>**iprocdir**<br>**ic0adir**<br>**il0dir**<br>**ivdir**<br>**fld** |  Ensemble<br> MPI data<br> Namelist<br> Geometry<br> Processor index for dirac function<br> Subset Sc0, halo A index for dirac function<br> Subset Sl0 index for dirac function<br> Variable index for dirac function<br> Field | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>integer<br>integer<br>integer<br>integer<br>real(kind_real) | in<br>inout<br>in<br>in<br>in<br>in<br>in<br>in<br>out |
| subroutine | [ens_normality](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_ens.F90#L681) | perform some normality diagnostics | **ens**<br>**mpl**<br>**nam**<br>**geom**<br>**io** |  Ensemble<br> MPI data<br> Namelist<br> Geometry<br> I/O | class(ens_type)<br>type(mpl_type)<br>type(nam_type)<br>type(geom_type)<br>type(io_type) | inout<br>inout<br>in<br>in<br>in |
