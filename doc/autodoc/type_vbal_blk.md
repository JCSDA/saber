# Module type_vbal_blk

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [vbal_blk_alloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L58) | allocation | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**geom** :  Geometry - type(geom_type) - in<br>**nc2b** :  Subset Sc2 size, halo B - integer - in<br>**iv** :  First variable index - integer - in<br>**jv** :  Second variable index - integer - in |
| subroutine | [vbal_blk_partial_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L82) | release memory (partial) | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - inout |
| subroutine | [vbal_blk_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L100) | release memory (full) | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - inout |
| subroutine | [vbal_blk_compute_covariances](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L123) | compute auto- and cross-covariances | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**geom** :  Geometry - type(geom_type) - in<br>**samp** :  Sampling - type(samp_type) - in<br>**ens** :  Ensemble - type(ens_type) - in<br>**auto** :  Auto-covariance - real(kind_real) - out<br>**cross** :  Cross-covariance - real(kind_real) - out |
| subroutine | [vbal_blk_compute_regression](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L219) | compute regression | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**geom** :  Geometry - type(geom_type) - in<br>**samp** :  Sampling - type(samp_type) - in<br>**nsub** :  Number of sub-ensembles - integer - in<br>**auto** :  Auto-covariance - real(kind_real) - in<br>**cross** :  Cross-covariance - real(kind_real) - in<br>**ic2b** :  Index - integer - in |
| subroutine | [vbal_blk_apply](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L332) | apply vertical balance block | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - in<br>**geom** :  Geometry - type(geom_type) - in<br>**h_n_s** :  Number of neighbors for the horizontal interpolation - integer - in<br>**h_c2b** :  Index of neighbors for the horizontal interpolation - integer - in<br>**h_S** :  Weight of neighbors for the horizontal interpolation - real(kind_real) - in<br>**fld** :  Source/destination vector - real(kind_real) - inout |
| subroutine | [vbal_blk_apply_ad](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L376) | apply adjoint vertical balance block | **vbal_blk** :  Vertical balance block - class(vbal_blk_type) - in<br>**geom** :  Geometry - type(geom_type) - in<br>**h_n_s** :  Number of neighbors for the horizontal interpolation - integer - in<br>**h_c2b** :  Index of neighbors for the horizontal interpolation - integer - in<br>**h_S** :  Weight of neighbors for the horizontal interpolation - real(kind_real) - in<br>**fld** :  Source/destination vector - real(kind_real) - inout |
