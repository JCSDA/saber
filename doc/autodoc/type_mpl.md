# Module type_mpl

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [mpl_newunit](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L127) | find a free unit | **mpl** :  MPI data - class(mpl_type) - inout<br>**lunit** :  New unit - integer - out |
| subroutine | [mpl_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L158) | initialize MPL object | **mpl** :  MPI data - class(mpl_type) - inout<br>**f_comm** :  FCKIT MPI communicator wrapper - type(fckit_mpi_comm) - in |
| subroutine | [mpl_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L213) | finalize MPI | **mpl** :  MPI data - class(mpl_type) - inout |
| subroutine | [mpl_flush](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L230) | flush listings | **mpl** :  MPI data - class(mpl_type) - inout<br>**advance_flag** :  Advance flag - logical - in |
| subroutine | [mpl_abort](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L346) | clean MPI abort | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**message** :  Message - character(len=*) - in |
| subroutine | [mpl_warning](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L368) | print warning message | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**message** :  Message - character(len=*) - in |
| subroutine | [mpl_update_tag](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L387) | update MPI tag | **mpl** :  MPI data - class(mpl_type) - inout<br>**add** :  Tag update incrememnt - integer - in |
| subroutine | [mpl_broadcast_string_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L409) | broadcast 1d string array | **mpl** :  MPI data - class(mpl_type) - in<br>**var** :  Logical array, 1d - character(len=*) - inout<br>**root** :  Root task - integer - in |
| subroutine | [mpl_dot_prod_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L433) | global dot product over local fields, 1d | **mpl** :  MPI data - class(mpl_type) - in<br>**fld1** :  Field 1 - real(kind_real) - in<br>**fld2** :  Field 2 - real(kind_real) - in<br>**dp** :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L464) | global dot product over local fields, 2d | **mpl** :  MPI data - class(mpl_type) - in<br>**fld1** :  Field 1 - real(kind_real) - in<br>**fld2** :  Field 2 - real(kind_real) - in<br>**dp** :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_3d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L495) | global dot product over local fields, 3d | **mpl** :  MPI data - class(mpl_type) - in<br>**fld1** :  Field 1 - real(kind_real) - in<br>**fld2** :  Field 2 - real(kind_real) - in<br>**dp** :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_4d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L526) | global dot product over local fields, 4d | **mpl** :  MPI data - class(mpl_type) - in<br>**fld1** :  Field 1 - real(kind_real) - in<br>**fld2** :  Field 2 - real(kind_real) - in<br>**dp** :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_glb_to_loc_index](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L561) | communicate global index to local index | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local dimension - integer - in<br>**loc_to_glb** :  Local to global index - integer - in<br>**n_glb** :  Global dimension - integer - in<br>**glb_to_loc** :  Global to local index - integer - out<br>**glb_to_proc** :  Global to processor - integer - out<br>**rootproc** :  Root task - integer - in<br>**pool** :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L648) | global to local, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - integer - in<br>**loc** :  Local array - integer - out |
| subroutine | [mpl_glb_to_loc_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L728) | global to local, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - integer - in<br>**loc** :  Local array - integer - out<br>**rootproc** :  Root task - integer - in<br>**pool** :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L835) | global to local, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - real(kind_real) - in<br>**loc** :  Local array - real(kind_real) - out |
| subroutine | [mpl_glb_to_loc_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L916) | global to local, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - real(kind_real) - in<br>**loc** :  Local array - real(kind_real) - out<br>**rootproc** :  Root task - integer - in<br>**pool** :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1024) | global to local, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - logical - in<br>**loc** :  Local array - logical - out |
| subroutine | [mpl_glb_to_loc_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1105) | global to local, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**glb** :  Global array - logical - in<br>**loc** :  Local array - logical - out<br>**rootproc** :  Root task - integer - in<br>**pool** :  Tasks pool - logical - in |
| subroutine | [mpl_loc_to_glb_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1214) | local to global, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - integer - in<br>**glb** :  Global array - integer - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1301) | local to global, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - integer - in<br>**glb** :  Global array - integer - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1401) | local to global, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - real(kind_real) - in<br>**glb** :  Global array - real(kind_real) - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1489) | local to global, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - real(kind_real) - in<br>**glb** :  Global array - real(kind_real) - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1590) | local to global, 1d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - logical - in<br>**glb** :  Global array - logical - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1678) | local to global for a logical, 2d array | **mpl** :  MPI data - class(mpl_type) - inout<br>**nl** :  Number of levels - integer - in<br>**n_loc** :  Local array size - integer - in<br>**n_glb** :  Global array size - integer - in<br>**loc_to_glb** :  Local to global - integer - in<br>**loc** :  Local array - logical - in<br>**glb** :  Global array - logical - out<br>**bcast** :  Broadcast option - logical - in |
| subroutine | [mpl_prog_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1774) | initialize progression display | **mpl** :  MPI data - class(mpl_type) - inout<br>**nprog** :  Array size - integer - in |
| subroutine | [mpl_prog_print](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1807) | print progression display | **mpl** :  MPI data - class(mpl_type) - inout<br>**i** :  Index - integer - in |
| subroutine | [mpl_prog_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1844) | finalize progression display | **mpl** :  MPI data - class(mpl_type) - inout<br>**advance_flag** :  Advance flag - logical - in |
| function | [mpl_nc_file_create_or_open](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1889) | create or open NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**filename** :  File name - character(len=*) - in<br>**f_comm** :  Communicator - type(fckit_mpi_comm) - in |
| function | [mpl_nc_group_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1932) | define or get group | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**ncid** :  NetCDF file ID - integer - in<br>**grpname** :  Group name - character(len=*) - in |
| function | [mpl_nc_dim_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1961) | define or get (and check) NetCDF dimension | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**ncid** :  NetCDF file ID - integer - in<br>**dimname** :  Dimension name - character(len=*) - in<br>**dimsize** :  Dimension size - integer - in |
| function | [mpl_nc_dim_inquire](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1997) | inquire NetCDF file dimension size | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**ncid** :  NetCDF file ID - integer - in<br>**dimname** :  Dimension name - character(len=*) - in |
| subroutine | [mpl_nc_dim_check](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2028) | check if NetCDF file dimension exists and has the right size | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**ncid** :  NetCDF file ID - integer - in<br>**dimname** :  Dimension name - character(len=*) - in<br>**dimsize** :  Expected dimension size - integer - in |
| function | [mpl_nc_var_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2059) | define or get NetCDF variable | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**ncid** :  NetCDF file ID - integer - in<br>**varname** :  Variable name - character(len=*) - in<br>**varkind** :  Variable kind - integer - in<br>**varshape** :  Variable shape - integer - in<br>**unitname** :  Unit name - character(len=*) - in |
| subroutine | [mpl_ncerr](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2100) | handle NetCDF error | **mpl** :  MPI data - class(mpl_type) - inout<br>**subr** :  Calling subroutine - character(len=*) - in<br>**info** :  Info index - integer - in |
| subroutine | [mpl_write_integer](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2120) | write integer into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**var** :  Integer - integer - in |
| subroutine | [mpl_write_integer_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2160) | write integer array into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**n** :  Integer array size - integer - in<br>**var** :  Integer array - integer - in |
| subroutine | [mpl_write_real](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2211) | write real into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**var** :  Real - real(kind_real) - in |
| subroutine | [mpl_write_real_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2246) | write real array into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**n** :  Real array size - integer - in<br>**var** :  Real array - real(kind_real) - in |
| subroutine | [mpl_write_logical](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2293) | write logical into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**var** :  Logical - logical - in |
| subroutine | [mpl_write_logical_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2329) | write logical array into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**n** :  Real array size - integer - in<br>**var** :  Logical array - logical - in |
| subroutine | [mpl_write_string](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2382) | write string into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**var** :  String - character(len=*) - in |
| subroutine | [mpl_write_string_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2419) | write string array into a log file or into a NetCDF file | **mpl** :  MPI data - class(mpl_type) - inout<br>**ncid** :  NetCDF file id - integer - in<br>**prefix** :  Prefix - character(len=*) - in<br>**variables** :  Variable name - character(len=*) - in<br>**n** :  String array size - integer - in<br>**var** :  String array - character(len=*) - in |
