# Module type_mpl

| Type | Name | Purpose | Arguments |     | Type | Intent |
| :--: | :--: | :------ | --------: | :-- | :--: | :----: |
| subroutine | [mpl_newunit](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L127) | find a free unit | **mpl**<br>**lunit** |  MPI data<br> New unit | class(mpl_type)<br>integer | inout<br>out |
| subroutine | [mpl_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L158) | initialize MPL object | **mpl**<br>**f_comm** |  MPI data<br> FCKIT MPI communicator wrapper | class(mpl_type)<br>type(fckit_mpi_comm) | inout<br>in |
| subroutine | [mpl_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L213) | finalize MPI | **mpl** |  MPI data | class(mpl_type) | inout |
| subroutine | [mpl_flush](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L230) | flush listings | **mpl**<br>**advance_flag** |  MPI data<br> Advance flag | class(mpl_type)<br>logical | inout<br>in |
| subroutine | [mpl_abort](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L346) | clean MPI abort | **mpl**<br>**subr**<br>**message** |  MPI data<br> Calling subroutine<br> Message | class(mpl_type)<br>character(len=*)<br>character(len=*) | inout<br>in<br>in |
| subroutine | [mpl_warning](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L368) | print warning message | **mpl**<br>**subr**<br>**message** |  MPI data<br> Calling subroutine<br> Message | class(mpl_type)<br>character(len=*)<br>character(len=*) | inout<br>in<br>in |
| subroutine | [mpl_update_tag](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L387) | update MPI tag | **mpl**<br>**add** |  MPI data<br> Tag update incrememnt | class(mpl_type)<br>integer | inout<br>in |
| subroutine | [mpl_broadcast_string_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L409) | broadcast 1d string array | **mpl**<br>**var**<br>**root** |  MPI data<br> Logical array, 1d<br> Root task | class(mpl_type)<br>character(len=*)<br>integer | in<br>inout<br>in |
| subroutine | [mpl_dot_prod_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L433) | global dot product over local fields, 1d | **mpl**<br>**fld1(:)**<br>**fld2(:)**<br>**dp** |  MPI data<br> Field 1<br> Field 2<br> Global dot product | class(mpl_type)<br>real(kind_real)<br>real(kind_real)<br>real(kind_real) | in<br>in<br>in<br>out |
| subroutine | [mpl_dot_prod_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L464) | global dot product over local fields, 2d | **mpl**<br>**fld1(:,:)**<br>**fld2(:,:)**<br>**dp** |  MPI data<br> Field 1<br> Field 2<br> Global dot product | class(mpl_type)<br>real(kind_real)<br>real(kind_real)<br>real(kind_real) | in<br>in<br>in<br>out |
| subroutine | [mpl_dot_prod_3d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L495) | global dot product over local fields, 3d | **mpl**<br>**fld1(:,:,:)**<br>**fld2(:,:,:)**<br>**dp** |  MPI data<br> Field 1<br> Field 2<br> Global dot product | class(mpl_type)<br>real(kind_real)<br>real(kind_real)<br>real(kind_real) | in<br>in<br>in<br>out |
| subroutine | [mpl_dot_prod_4d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L526) | global dot product over local fields, 4d | **mpl**<br>**fld1(:,:,:,:)**<br>**fld2(:,:,:,:)**<br>**dp** |  MPI data<br> Field 1<br> Field 2<br> Global dot product | class(mpl_type)<br>real(kind_real)<br>real(kind_real)<br>real(kind_real) | in<br>in<br>in<br>out |
| subroutine | [mpl_glb_to_loc_index](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L561) | communicate global index to local index | **mpl**<br>**n_loc**<br>**loc_to_glb(n_loc)**<br>**n_glb**<br>**glb_to_loc(:)**<br>**glb_to_proc(:)**<br>**rootproc**<br>**pool(mpl%nproc)** |  MPI data<br> Local dimension<br> Local to global index<br> Global dimension<br> Global to local index<br> Global to processor<br> Root task<br> Tasks pool | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>integer<br>integer<br>logical | inout<br>in<br>in<br>in<br>out<br>out<br>in<br>in |
| subroutine | [mpl_glb_to_loc_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L648) | global to local, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:)**<br>**loc(n_loc)** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>integer | inout<br>in<br>in<br>in<br>in<br>out |
| subroutine | [mpl_glb_to_loc_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L728) | global to local, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:,:)**<br>**loc(n_loc,nl)**<br>**rootproc**<br>**pool(mpl%nproc)** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array<br> Root task<br> Tasks pool | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>integer<br>integer<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in<br>in |
| subroutine | [mpl_glb_to_loc_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L835) | global to local, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:)**<br>**loc(n_loc)** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array | class(mpl_type)<br>integer<br>integer<br>integer<br>real(kind_real)<br>real(kind_real) | inout<br>in<br>in<br>in<br>in<br>out |
| subroutine | [mpl_glb_to_loc_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L916) | global to local, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:,:)**<br>**loc(n_loc,nl)**<br>**rootproc**<br>**pool(mpl%nproc)** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array<br> Root task<br> Tasks pool | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>real(kind_real)<br>real(kind_real)<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in<br>in |
| subroutine | [mpl_glb_to_loc_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1024) | global to local, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:)**<br>**loc(n_loc)** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array | class(mpl_type)<br>integer<br>integer<br>integer<br>logical<br>logical | inout<br>in<br>in<br>in<br>in<br>out |
| subroutine | [mpl_glb_to_loc_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1105) | global to local, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**glb(:,:)**<br>**loc(n_loc,nl)**<br>**rootproc**<br>**pool(mpl%nproc)** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Global array<br> Local array<br> Root task<br> Tasks pool | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>logical<br>logical<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in<br>in |
| subroutine | [mpl_loc_to_glb_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1214) | local to global, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc)**<br>**glb(:)**<br>**bcast** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_loc_to_glb_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1301) | local to global, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc,nl)**<br>**glb(:,:)**<br>**bcast** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>integer<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_loc_to_glb_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1401) | local to global, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc)**<br>**glb(:)**<br>**bcast** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>real(kind_real)<br>real(kind_real)<br>logical | inout<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_loc_to_glb_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1489) | local to global, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc,nl)**<br>**glb(:,:)**<br>**bcast** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>real(kind_real)<br>real(kind_real)<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_loc_to_glb_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1590) | local to global, 1d array | **mpl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc)**<br>**glb(:)**<br>**bcast** |  MPI data<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>logical<br>logical<br>logical | inout<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_loc_to_glb_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1678) | local to global for a logical, 2d array | **mpl**<br>**nl**<br>**n_loc**<br>**n_glb**<br>**loc_to_glb(n_loc)**<br>**loc(n_loc,nl)**<br>**glb(:,:)**<br>**bcast** |  MPI data<br> Number of levels<br> Local array size<br> Global array size<br> Local to global<br> Local array<br> Global array<br> Broadcast option | class(mpl_type)<br>integer<br>integer<br>integer<br>integer<br>logical<br>logical<br>logical | inout<br>in<br>in<br>in<br>in<br>in<br>out<br>in |
| subroutine | [mpl_prog_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1774) | initialize progression display | **mpl**<br>**nprog** |  MPI data<br> Array size | class(mpl_type)<br>integer | inout<br>in |
| subroutine | [mpl_prog_print](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1807) | print progression display | **mpl**<br>**i** |  MPI data<br> Index | class(mpl_type)<br>integer | inout<br>in |
| subroutine | [mpl_prog_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1844) | finalize progression display | **mpl**<br>**advance_flag** |  MPI data<br> Advance flag | class(mpl_type)<br>logical | inout<br>in |
| function | [mpl_nc_file_create_or_open](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1889) | create or open NetCDF file | **mpl**<br>**subr**<br>**filename**<br>**f_comm** |  MPI data<br> Calling subroutine<br> File name<br> Communicator | class(mpl_type)<br>character(len=*)<br>character(len=*)<br>type(fckit_mpi_comm) | inout<br>in<br>in<br>in |
| function | [mpl_nc_group_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1932) | define or get group | **mpl**<br>**subr**<br>**ncid**<br>**grpname** |  MPI data<br> Calling subroutine<br> NetCDF file ID<br> Group name | class(mpl_type)<br>character(len=*)<br>integer<br>character(len=*) | inout<br>in<br>in<br>in |
| function | [mpl_nc_dim_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1961) | define or get (and check) NetCDF dimension | **mpl**<br>**subr**<br>**ncid**<br>**dimname**<br>**dimsize** |  MPI data<br> Calling subroutine<br> NetCDF file ID<br> Dimension name<br> Dimension size | class(mpl_type)<br>character(len=*)<br>integer<br>character(len=*)<br>integer | inout<br>in<br>in<br>in<br>in |
| function | [mpl_nc_dim_inquire](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1997) | inquire NetCDF file dimension size | **mpl**<br>**subr**<br>**ncid**<br>**dimname** |  MPI data<br> Calling subroutine<br> NetCDF file ID<br> Dimension name | class(mpl_type)<br>character(len=*)<br>integer<br>character(len=*) | inout<br>in<br>in<br>in |
| subroutine | [mpl_nc_dim_check](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2028) | check if NetCDF file dimension exists and has the right size | **mpl**<br>**subr**<br>**ncid**<br>**dimname**<br>**dimsize** |  MPI data<br> Calling subroutine<br> NetCDF file ID<br> Dimension name<br> Expected dimension size | class(mpl_type)<br>character(len=*)<br>integer<br>character(len=*)<br>integer | inout<br>in<br>in<br>in<br>in |
| function | [mpl_nc_var_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2059) | define or get NetCDF variable | **mpl**<br>**subr**<br>**ncid**<br>**varname**<br>**varkind**<br>**varshape(:)**<br>**unitname** |  MPI data<br> Calling subroutine<br> NetCDF file ID<br> Variable name<br> Variable kind<br> Variable shape<br> Unit name | class(mpl_type)<br>character(len=*)<br>integer<br>character(len=*)<br>integer<br>integer<br>character(len=*) | inout<br>in<br>in<br>in<br>in<br>in<br>in |
| subroutine | [mpl_ncerr](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2100) | handle NetCDF error | **mpl**<br>**subr**<br>**info** |  MPI data<br> Calling subroutine<br> Info index | class(mpl_type)<br>character(len=*)<br>integer | inout<br>in<br>in |
| subroutine | [mpl_write_integer](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2120) | write integer into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**var** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Integer | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>integer | inout<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_integer_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2160) | write integer array into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**n**<br>**var(n)** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Integer array size<br> Integer array | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>integer<br>integer | inout<br>in<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_real](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2211) | write real into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**var** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Real | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>real(kind_real) | inout<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_real_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2246) | write real array into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**n**<br>**var(n)** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Real array size<br> Real array | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>integer<br>real(kind_real) | inout<br>in<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_logical](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2293) | write logical into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**var** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Logical | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>logical | inout<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_logical_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2329) | write logical array into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**n**<br>**var(n)** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> Real array size<br> Logical array | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>integer<br>logical | inout<br>in<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_string](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2382) | write string into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**var** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> String | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>character(len=*) | inout<br>in<br>in<br>in<br>in |
| subroutine | [mpl_write_string_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2419) | write string array into a log file or into a NetCDF file | **mpl**<br>**ncid**<br>**prefix**<br>**variables**<br>**n**<br>**var(n)** |  MPI data<br> NetCDF file id<br> Prefix<br> Variable name<br> String array size<br> String array | class(mpl_type)<br>integer<br>character(len=*)<br>character(len=*)<br>integer<br>character(len=*) | inout<br>in<br>in<br>in<br>in<br>in |
