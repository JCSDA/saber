# Module type_geom

| Type | Name | Purpose | Arguments |     | Type | Intent |
| :--: | :--: | :------ | --------: | :-- | :--: | :----: |
| subroutine | [geom_partial_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L171) | release memory (partial) | **geom** |  Geometry | class(geom_type) | inout |
| subroutine | [geom_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L236) | release memory | **geom** |  Geometry | class(geom_type) | inout |
| subroutine | [geom_setup](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L260) | setup geometry | **geom**<br>**mpl**<br>**rng**<br>**nam**<br>**afunctionspace**<br>**afieldset** |  Geometry<br> MPI data<br> Random number generator<br> Namelists<br> ATLAS function space<br> ATLAS fieldset | class(geom_type)<br>type(mpl_type)<br>type(rng_type)<br>type(nam_type)<br>type(atlas_functionspace)<br>type(atlas_fieldset) | inout<br>inout<br>inout<br>in<br>in<br>in |
| subroutine | [geom_from_atlas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L376) | set geometry from ATLAS fieldset | **geom**<br>**mpl**<br>**afunctionspace**<br>**afieldset** |  Geometry<br> MPI data<br> ATLAS function space<br> ATLAS fieldset | class(geom_type)<br>type(mpl_type)<br>type(atlas_functionspace)<br>type(atlas_fieldset) | inout<br>inout<br>in<br>in |
| subroutine | [geom_setup_universe](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L524) | setup universe | **geom**<br>**mpl**<br>**rng**<br>**nam** |  Geometry<br> MPI data<br> Random number generator<br> Namelist | class(geom_type)<br>type(mpl_type)<br>type(rng_type)<br>type(nam_type) | inout<br>inout<br>inout<br>in |
| subroutine | [geom_setup_c0](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L648) | setup subset Sc0 | **geom**<br>**mpl** |  Geometry<br> MPI data | class(geom_type)<br>type(mpl_type) | inout<br>inout |
| subroutine | [geom_setup_tree](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1067) | setup tree | **geom**<br>**mpl** |  Geometry<br> MPI data | class(geom_type)<br>type(mpl_type) | inout<br>inout |
| subroutine | [geom_setup_meshes](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1092) | setup meshes | **geom**<br>**mpl**<br>**rng**<br>**nam** |  Geometry<br> MPI data<br> Random number generator<br> Namelist | class(geom_type)<br>type(mpl_type)<br>type(rng_type)<br>type(nam_type) | inout<br>inout<br>inout<br>in |
| subroutine | [geom_setup_independent_levels](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1191) | setup independent levels | **geom**<br>**mpl** |  Geometry<br> MPI data | class(geom_type)<br>type(mpl_type) | inout<br>inout |
| subroutine | [geom_setup_mask_distance](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1239) | setup minimum distance to mask | **geom**<br>**mpl**<br>**nam** |  Geometry<br> MPI data<br> Namelist | class(geom_type)<br>type(mpl_type)<br>type(nam_type) | inout<br>inout<br>in |
| subroutine | [geom_setup_mask_check](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1298) | setup mask checking tool | **geom**<br>**mpl**<br>**nam** |  Geometry<br> MPI data<br> Namelist | class(geom_type)<br>type(mpl_type)<br>type(nam_type) | inout<br>inout<br>in |
| subroutine | [geom_index_from_lonlat](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1367) | get nearest neighbor index from longitude/latitude/level | **geom**<br>**mpl**<br>**lon**<br>**lat**<br>**il0**<br>**iproc**<br>**ic0a**<br>**gmask** |  Geometry<br> MPI data<br> Longitude<br> Latitude<br> Level index<br> Task index<br> Local index<br> Local mask | class(geom_type)<br>type(mpl_type)<br>real(kind_real)<br>real(kind_real)<br>integer<br>integer<br>integer<br>logical | in<br>inout<br>in<br>in<br>in<br>out<br>out<br>out |
| subroutine | [geom_setup_dirac](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1440) | setup dirac indices | **geom**<br>**mpl**<br>**nam** |  Geometry<br> MPI data<br> Namelist | class(geom_type)<br>type(mpl_type)<br>type(nam_type) | inout<br>inout<br>in |
| subroutine | [geom_check_arc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1503) | check if an arc is crossing boundaries | **geom**<br>**mpl**<br>**il0**<br>**lon_s**<br>**lat_s**<br>**lon_e**<br>**lat_e**<br>**valid** |  Geometry<br> MPI data<br> Level<br> First point longitude<br> First point latitude<br> Second point longitude<br> Second point latitude<br> True for valid arcs | class(geom_type)<br>type(mpl_type)<br>integer<br>real(kind_real)<br>real(kind_real)<br>real(kind_real)<br>real(kind_real)<br>logical | in<br>inout<br>in<br>in<br>in<br>in<br>in<br>out |
| subroutine | [geom_copy_c0a_to_mga](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1553) | copy from subset Sc0 to model grid, halo A | **geom**<br>**mpl**<br>**fld_c0a(geom%nc0a,geom%nl0)**<br>**fld_mga(geom%nmga,geom%nl0)** |  Geometry<br> MPI data<br> Field on subset Sc0, halo A<br> Field on model grid, halo A | class(geom_type)<br>type(mpl_type)<br>real(kind_real)<br>real(kind_real) | in<br>inout<br>in<br>out |
| subroutine | [geom_copy_mga_to_c0a_real](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1592) | copy from model grid to subset Sc0, halo A, real | **geom**<br>**mpl**<br>**fld_mga(geom%nmga,geom%nl0)**<br>**fld_c0a(geom%nc0a,geom%nl0)** |  Geometry<br> MPI data<br> Field on model grid, halo A<br> Field on subset Sc0, halo A | class(geom_type)<br>type(mpl_type)<br>real(kind_real)<br>real(kind_real) | in<br>inout<br>in<br>out |
| subroutine | [geom_copy_mga_to_c0a_logical](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1626) | copy from model grid to subset Sc0, halo A, logical | **geom**<br>**mpl**<br>**fld_mga(geom%nmga,geom%nl0)**<br>**fld_c0a(geom%nc0a,geom%nl0)** |  Geometry<br> MPI data<br> Field on model grid, halo A<br> Field on subset Sc0, halo A | class(geom_type)<br>type(mpl_type)<br>logical<br>logical | in<br>inout<br>in<br>out |
| subroutine | [geom_compute_deltas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1671) | compute deltas for LCT definition | **geom**<br>**ic0u**<br>**il0**<br>**jc0u**<br>**jl0**<br>**dx**<br>**dy**<br>**dz** |  Geometry<br> First horizontal index, universe<br> First vertical index<br> Second horizontal index, universe<br> Second vertical index<br> Longitude delta<br> Latitude delta<br> Altitude delta | class(geom_type)<br>integer<br>integer<br>integer<br>integer<br>real(kind_real)<br>real(kind_real)<br>real(kind_real) | in<br>in<br>in<br>in<br>in<br>out<br>out<br>out |
| subroutine | [geom_rand_point](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1697) | select random valid point on the horizontal grid | **geom**<br>**mpl**<br>**rng**<br>**il0**<br>**iproc**<br>**ic0a**<br>**nr** |  Geometry<br> MPI data<br> Random number generator<br> Level<br> Processor<br> Local index<br> Number of random tries | class(geom_type)<br>type(mpl_type)<br>type(rng_type)<br>integer<br>integer<br>integer<br>integer | in<br>inout<br>inout<br>in<br>out<br>out<br>out |
| function | [geom_mg_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1737) | conversion from global to processor on model grid | **geom**<br>**img** |  Geometry<br> Global index | class(geom_type)<br>integer | in<br>in |
| function | [geom_c0_to_c0a](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1759) | conversion from global to halo A on subset Sc0 | **geom**<br>**ic0** |  Geometry<br> Global index | class(geom_type)<br>integer | in<br>in |
| function | [geom_c0_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1785) | conversion from global to processor on subset Sc0 | **geom**<br>**ic0** |  Geometry<br> Global index | class(geom_type)<br>integer | in<br>in |
| function | [geom_c0_to_c0u](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1807) | conversion from global to universe on subset Sc0 | **geom**<br>**ic0** |  Geometry<br> Global index | class(geom_type)<br>integer | in<br>in |
