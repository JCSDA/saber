# Module type_geom

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [geom_partial_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L177) | release memory (partial) | **geom** :  Geometry - class(geom_type) - inout |
| subroutine | [geom_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L241) | release memory | **geom** :  Geometry - class(geom_type) - inout |
| subroutine | [geom_setup](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L266) | setup geometry | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**rng** :  Random number generator - type(rng_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**afunctionspace** :  ATLAS function space - type(atlas_functionspace) - in<br>**fieldset** :  Fieldset containing geometry elements - type(fieldset_type) - in |
| subroutine | [geom_from_atlas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L382) | set geometry from fieldset | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**afunctionspace** :  ATLAS function space - type(atlas_functionspace) - in<br>**fieldset** :  Fieldset - type(fieldset_type) - in |
| subroutine | [geom_setup_universe](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L530) | setup universe | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**rng** :  Random number generator - type(rng_type) - inout<br>**nam** :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_c0](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L654) | setup subset Sc0 | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_tree](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1072) | setup tree | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_meshes](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1097) | setup meshes | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**rng** :  Random number generator - type(rng_type) - inout<br>**nam** :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_independent_levels](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1196) | setup independent levels | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_mask_distance](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1244) | setup minimum distance to mask | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_mask_check](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1303) | setup mask checking tool | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in |
| subroutine | [geom_index_from_lonlat](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1372) | get nearest neighbor index from longitude/latitude/level | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**lon** :  Longitude - real(kind_real) - in<br>**lat** :  Latitude - real(kind_real) - in<br>**il0** :  Level index - integer - in<br>**iproc** :  Task index - integer - out<br>**ic0a** :  Local index - integer - out<br>**gmask** :  Local mask - logical - out |
| subroutine | [geom_setup_dirac](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1445) | setup dirac indices | **geom** :  Geometry - class(geom_type) - inout<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in |
| subroutine | [geom_check_arc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1508) | check if an arc is crossing boundaries | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**il0** :  Level - integer - in<br>**lon_s** :  First point longitude - real(kind_real) - in<br>**lat_s** :  First point latitude - real(kind_real) - in<br>**lon_e** :  Second point longitude - real(kind_real) - in<br>**lat_e** :  Second point latitude - real(kind_real) - in<br>**valid** :  True for valid arcs - logical - out |
| subroutine | [geom_copy_c0a_to_mga_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1558) | copy from subset Sc0 to model grid, halo A, single field | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - in<br>**fld_mga** :  Field on model grid, halo A - real(kind_real) - out |
| subroutine | [geom_copy_c0a_to_mga_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1598) | copy from subset Sc0 to model grid, halo A, all fields | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - in<br>**fld_mga** :  Field on model grid, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_real_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1621) | copy from model grid to subset Sc0, halo A, real, single field | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**fld_mga** :  Field on model grid, halo A - real(kind_real) - in<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_real_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1656) | copy from model grid to subset Sc0, halo A, real, all fields | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**fld_mga** :  Field on model grid, halo A - real(kind_real) - in<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_logical_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1679) | copy from model grid to subset Sc0, halo A, logical, single field | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**fld_mga** :  Field on model grid, halo A - logical - in<br>**fld_c0a** :  Field on subset Sc0, halo A - logical - out |
| subroutine | [geom_copy_mga_to_c0a_logical_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1721) | copy from model grid to subset Sc0, halo A, logical, all fields | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**fld_mga** :  Field on model grid, halo A - logical - in<br>**fld_c0a** :  Field on subset Sc0, halo A - logical - out |
| subroutine | [geom_fieldset_to_c0](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1745) | fieldset to Fortran array on subset Sc0 | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**fieldset** :  Fieldset - type(fieldset_type) - in<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_c0_to_fieldset](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1782) | Fortran array on subset Sc0 to fieldset | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**nam** :  Namelist - type(nam_type) - in<br>**fld_c0a** :  Field on subset Sc0, halo A - real(kind_real) - in<br>**fieldset** :  Fieldset - type(fieldset_type) - inout |
| subroutine | [geom_compute_deltas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1822) | compute deltas for LCT definition | **geom** :  Geometry - class(geom_type) - in<br>**ic0u** :  First horizontal index, universe - integer - in<br>**il0** :  First vertical index - integer - in<br>**jc0u** :  Second horizontal index, universe - integer - in<br>**jl0** :  Second vertical index - integer - in<br>**dx** :  Longitude delta - real(kind_real) - out<br>**dy** :  Latitude delta - real(kind_real) - out<br>**dz** :  Altitude delta - real(kind_real) - out |
| subroutine | [geom_rand_point](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1848) | select random valid point on the horizontal grid | **geom** :  Geometry - class(geom_type) - in<br>**mpl** :  MPI data - type(mpl_type) - inout<br>**rng** :  Random number generator - type(rng_type) - inout<br>**il0** :  Level - integer - in<br>**iproc** :  Processor - integer - out<br>**ic0a** :  Local index - integer - out<br>**nr** :  Number of random tries - integer - out |
| function | [geom_mg_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1888) | conversion from global to processor on model grid | **geom** :  Geometry - class(geom_type) - in<br>**img** :  Global index - integer - in |
| function | [geom_c0_to_c0a](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1910) | conversion from global to halo A on subset Sc0 | **geom** :  Geometry - class(geom_type) - in<br>**ic0** :  Global index - integer - in |
| function | [geom_c0_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1936) | conversion from global to processor on subset Sc0 | **geom** :  Geometry - class(geom_type) - in<br>**ic0** :  Global index - integer - in |
| function | [geom_c0_to_c0u](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1958) | conversion from global to universe on subset Sc0 | **geom** :  Geometry - class(geom_type) - in<br>**ic0** :  Global index - integer - in |
