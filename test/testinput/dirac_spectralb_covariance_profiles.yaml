geometry:
  function space: StructuredColumns
  grid:
    type: regular_gaussian
    N: 12
  groups:
  - variables:
    - mu
    - unbalanced_pressure_levels_minus_one
    levels: 2
  partitioner: ectrans

background:
  date: '2010-01-01T12:00:00Z'
  state variables:
  - mu
  - unbalanced_pressure_levels_minus_one

increment variables:
- mu
- unbalanced_pressure_levels_minus_one

background error:
  covariance model: SABER
  saber central block:
    saber block name: spectral covariance
    active variables:
    - mu
    - unbalanced_pressure_levels_minus_one
    read:
      covariance_file: testdata/spectralcov.nc
      umatrix_netcdf_names:
      - MU_inc_Uv_matrix
      - aP_inc_Uv_matrix
    skip vertical convolution: true
  saber outer blocks:
  - saber block name: spectral to gauss

dirac:
  lon:
  - 1.0
  - 1.0
  - 1.0
  - 1.0
  lat:
  - 89.99
  - 89.99
  - 89.99
  - 89.99
  level:
  - 1
  - 2
  - 1
  - 2
  variable:
  - mu
  - mu
  - unbalanced_pressure_levels_minus_one
  - unbalanced_pressure_levels_minus_one

output dirac:
  mpi pattern: '%MPI%'
  filepath: testdata/dirac_spectralb_covariance_profiles/%MPI%_dirac_%id%

covariance profile:
  # Relevant for isotropic covariance models, or to quantify isotropy
  maximum distance: 1700e3  # (im m)
  remove duplicate distances: true
  output filepath: testdata/dirac_spectralb_covariance_profiles/_MPI__covariance_profiles.nc

test:
  reference filename: testref/dirac_spectralb_covariance_profiles.ref
