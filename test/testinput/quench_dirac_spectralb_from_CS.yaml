geometry:
  function space: NodeColumns
  grid:
    name : CS-LFR-15
  partitioner: cubedsphere
  levels: 70
  halo: 1
initial condition:
  date: 2010-01-01T12:00:00Z
  state variables: &vars [eastward_wind, northward_wind, unbalanced_pressure, moisture_control_variable]
background error:
  covariance model: SABER
  saber central block:
    saber block name: spectral covariance
    active variables: [streamfunction, velocity_potential, unbalanced_pressure, moisture_control_variable]
    spectralb:
      covariance_file: testdata/spectralcov.nc
      gauss_grid_uid: F160
      umatrix_netcdf_names: [PSI_inc_Uv_matrix, CHI_inc_Uv_matrix,
                             aP_inc_Uv_matrix, MU_inc_Uv_matrix]
      variance_opt: true
  saber outer blocks:
  - saber block name: spectral to gauss
    active variables: [unbalanced_pressure, moisture_control_variable]
  - saber block name: spectral to gauss winds
    gauss grid uid: F160
    use streamfunction and velocity potential: true
    use inner gaussian functionspace: true
  - saber block name: gauss to cubed-sphere-dual
    gauss grid uid: F160
    active variables: [eastward_wind, northward_wind, unbalanced_pressure, moisture_control_variable]

dirac:
  lon: [180.0, 180.0, 180.0, 180.0]
  lat: [0.0, 0.0, 0.0, 0.0]
  level: [1,1,1,1]
  variable: [eastward_wind, northward_wind,unbalanced_pressure, moisture_control_variable]
output dirac:
  filepath: testdata/quench_dirac_spectralb_from_CS/dirac_%id%

test:
  reference filename: testref/quench_dirac_spectralb_from_CS/test.log.out
