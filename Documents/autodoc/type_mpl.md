# Module type_mpl

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [mpl_newunit](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L127) | find a free unit | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>lunit</b> :  New unit - integer - out |
| subroutine | [mpl_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L158) | initialize MPL object | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>f_comm</b> :  FCKIT MPI communicator wrapper - type(fckit_mpi_comm) - in |
| subroutine | [mpl_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L213) | finalize MPI | <b>mpl</b> :  MPI data - class(mpl_type) - inout |
| subroutine | [mpl_flush](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L230) | flush listings | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>advance_flag</b> :  Advance flag - logical - in |
| subroutine | [mpl_abort](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L346) | clean MPI abort | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>message</b> :  Message - character(len=*) - in |
| subroutine | [mpl_warning](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L368) | print warning message | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>message</b> :  Message - character(len=*) - in |
| subroutine | [mpl_update_tag](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L387) | update MPI tag | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>add</b> :  Tag update incrememnt - integer - in |
| subroutine | [mpl_broadcast_string_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L409) | broadcast 1d string array | <b>mpl</b> :  MPI data - class(mpl_type) - in<br><b>var</b> :  Logical array, 1d - character(len=*) - inout<br><b>root</b> :  Root task - integer - in |
| subroutine | [mpl_dot_prod_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L433) | global dot product over local fields, 1d | <b>mpl</b> :  MPI data - class(mpl_type) - in<br><b>fld1</b> :  Field 1 - real(kind_real) - in<br><b>fld2</b> :  Field 2 - real(kind_real) - in<br><b>dp</b> :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L464) | global dot product over local fields, 2d | <b>mpl</b> :  MPI data - class(mpl_type) - in<br><b>fld1</b> :  Field 1 - real(kind_real) - in<br><b>fld2</b> :  Field 2 - real(kind_real) - in<br><b>dp</b> :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_3d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L495) | global dot product over local fields, 3d | <b>mpl</b> :  MPI data - class(mpl_type) - in<br><b>fld1</b> :  Field 1 - real(kind_real) - in<br><b>fld2</b> :  Field 2 - real(kind_real) - in<br><b>dp</b> :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_dot_prod_4d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L526) | global dot product over local fields, 4d | <b>mpl</b> :  MPI data - class(mpl_type) - in<br><b>fld1</b> :  Field 1 - real(kind_real) - in<br><b>fld2</b> :  Field 2 - real(kind_real) - in<br><b>dp</b> :  Global dot product - real(kind_real) - out |
| subroutine | [mpl_glb_to_loc_index](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L561) | communicate global index to local index | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local dimension - integer - in<br><b>loc_to_glb</b> :  Local to global index - integer - in<br><b>n_glb</b> :  Global dimension - integer - in<br><b>glb_to_loc</b> :  Global to local index - integer - out<br><b>glb_to_proc</b> :  Global to processor - integer - out<br><b>rootproc</b> :  Root task - integer - in<br><b>pool</b> :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L648) | global to local, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - integer - in<br><b>loc</b> :  Local array - integer - out |
| subroutine | [mpl_glb_to_loc_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L728) | global to local, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - integer - in<br><b>loc</b> :  Local array - integer - out<br><b>rootproc</b> :  Root task - integer - in<br><b>pool</b> :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L835) | global to local, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - real(kind_real) - in<br><b>loc</b> :  Local array - real(kind_real) - out |
| subroutine | [mpl_glb_to_loc_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L916) | global to local, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - real(kind_real) - in<br><b>loc</b> :  Local array - real(kind_real) - out<br><b>rootproc</b> :  Root task - integer - in<br><b>pool</b> :  Tasks pool - logical - in |
| subroutine | [mpl_glb_to_loc_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1024) | global to local, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - logical - in<br><b>loc</b> :  Local array - logical - out |
| subroutine | [mpl_glb_to_loc_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1105) | global to local, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>glb</b> :  Global array - logical - in<br><b>loc</b> :  Local array - logical - out<br><b>rootproc</b> :  Root task - integer - in<br><b>pool</b> :  Tasks pool - logical - in |
| subroutine | [mpl_loc_to_glb_integer_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1214) | local to global, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - integer - in<br><b>glb</b> :  Global array - integer - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_integer_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1301) | local to global, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - integer - in<br><b>glb</b> :  Global array - integer - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_real_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1401) | local to global, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - real(kind_real) - in<br><b>glb</b> :  Global array - real(kind_real) - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_real_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1489) | local to global, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - real(kind_real) - in<br><b>glb</b> :  Global array - real(kind_real) - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_logical_1d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1590) | local to global, 1d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - logical - in<br><b>glb</b> :  Global array - logical - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_loc_to_glb_logical_2d](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1678) | local to global for a logical, 2d array | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nl</b> :  Number of levels - integer - in<br><b>n_loc</b> :  Local array size - integer - in<br><b>n_glb</b> :  Global array size - integer - in<br><b>loc_to_glb</b> :  Local to global - integer - in<br><b>loc</b> :  Local array - logical - in<br><b>glb</b> :  Global array - logical - out<br><b>bcast</b> :  Broadcast option - logical - in |
| subroutine | [mpl_prog_init](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1774) | initialize progression display | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>nprog</b> :  Array size - integer - in |
| subroutine | [mpl_prog_print](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1807) | print progression display | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>i</b> :  Index - integer - in |
| subroutine | [mpl_prog_final](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1844) | finalize progression display | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>advance_flag</b> :  Advance flag - logical - in |
| function | [mpl_nc_file_create_or_open](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1889) | create or open NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>filename</b> :  File name - character(len=*) - in<br><b>f_comm</b> :  Communicator - type(fckit_mpi_comm) - in |
| function | [mpl_nc_group_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1932) | define or get group | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>ncid</b> :  NetCDF file ID - integer - in<br><b>grpname</b> :  Group name - character(len=*) - in |
| function | [mpl_nc_dim_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1961) | define or get (and check) NetCDF dimension | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>ncid</b> :  NetCDF file ID - integer - in<br><b>dimname</b> :  Dimension name - character(len=*) - in<br><b>dimsize</b> :  Dimension size - integer - in |
| function | [mpl_nc_dim_inquire](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L1997) | inquire NetCDF file dimension size | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>ncid</b> :  NetCDF file ID - integer - in<br><b>dimname</b> :  Dimension name - character(len=*) - in |
| subroutine | [mpl_nc_dim_check](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2028) | check if NetCDF file dimension exists and has the right size | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>ncid</b> :  NetCDF file ID - integer - in<br><b>dimname</b> :  Dimension name - character(len=*) - in<br><b>dimsize</b> :  Expected dimension size - integer - in |
| function | [mpl_nc_var_define_or_get](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2059) | define or get NetCDF variable | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>ncid</b> :  NetCDF file ID - integer - in<br><b>varname</b> :  Variable name - character(len=*) - in<br><b>varkind</b> :  Variable kind - integer - in<br><b>varshape</b> :  Variable shape - integer - in<br><b>unitname</b> :  Unit name - character(len=*) - in |
| subroutine | [mpl_ncerr](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2100) | handle NetCDF error | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>subr</b> :  Calling subroutine - character(len=*) - in<br><b>info</b> :  Info index - integer - in |
| subroutine | [mpl_write_integer](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2120) | write integer into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>var</b> :  Integer - integer - in |
| subroutine | [mpl_write_integer_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2160) | write integer array into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>n</b> :  Integer array size - integer - in<br><b>var</b> :  Integer array - integer - in |
| subroutine | [mpl_write_real](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2211) | write real into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>var</b> :  Real - real(kind_real) - in |
| subroutine | [mpl_write_real_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2246) | write real array into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>n</b> :  Real array size - integer - in<br><b>var</b> :  Real array - real(kind_real) - in |
| subroutine | [mpl_write_logical](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2293) | write logical into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>var</b> :  Logical - logical - in |
| subroutine | [mpl_write_logical_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2329) | write logical array into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>n</b> :  Real array size - integer - in<br><b>var</b> :  Logical array - logical - in |
| subroutine | [mpl_write_string](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2382) | write string into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>var</b> :  String - character(len=*) - in |
| subroutine | [mpl_write_string_array](https://github.com/JCSDA/saber/tree/develop/src/saber/util/type_mpl.F90#L2419) | write string array into a log file or into a NetCDF file | <b>mpl</b> :  MPI data - class(mpl_type) - inout<br><b>ncid</b> :  NetCDF file id - integer - in<br><b>prefix</b> :  Prefix - character(len=*) - in<br><b>variables</b> :  Variable name - character(len=*) - in<br><b>n</b> :  String array size - integer - in<br><b>var</b> :  String array - character(len=*) - in |
