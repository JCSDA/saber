# Module type_geom

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [geom_partial_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L177) | release memory (partial) | <b>geom</b> :  Geometry - class(geom_type) - inout |
| subroutine | [geom_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L241) | release memory | <b>geom</b> :  Geometry - class(geom_type) - inout |
| subroutine | [geom_setup](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L266) | setup geometry | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>rng</b> :  Random number generator - type(rng_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>afunctionspace</b> :  ATLAS function space - type(atlas_functionspace) - in<br><b>fieldset</b> :  Fieldset containing geometry elements - type(fieldset_type) - in |
| subroutine | [geom_from_atlas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L382) | set geometry from fieldset | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>afunctionspace</b> :  ATLAS function space - type(atlas_functionspace) - in<br><b>fieldset</b> :  Fieldset - type(fieldset_type) - in |
| subroutine | [geom_setup_universe](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L530) | setup universe | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>rng</b> :  Random number generator - type(rng_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_c0](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L654) | setup subset Sc0 | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_tree](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1072) | setup tree | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_meshes](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1097) | setup meshes | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>rng</b> :  Random number generator - type(rng_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_independent_levels](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1196) | setup independent levels | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout |
| subroutine | [geom_setup_mask_distance](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1244) | setup minimum distance to mask | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in |
| subroutine | [geom_setup_mask_check](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1303) | setup mask checking tool | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in |
| subroutine | [geom_index_from_lonlat](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1372) | get nearest neighbor index from longitude/latitude/level | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>lon</b> :  Longitude - real(kind_real) - in<br><b>lat</b> :  Latitude - real(kind_real) - in<br><b>il0</b> :  Level index - integer - in<br><b>iproc</b> :  Task index - integer - out<br><b>ic0a</b> :  Local index - integer - out<br><b>gmask</b> :  Local mask - logical - out |
| subroutine | [geom_setup_dirac](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1445) | setup dirac indices | <b>geom</b> :  Geometry - class(geom_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in |
| subroutine | [geom_check_arc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1508) | check if an arc is crossing boundaries | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>il0</b> :  Level - integer - in<br><b>lon_s</b> :  First point longitude - real(kind_real) - in<br><b>lat_s</b> :  First point latitude - real(kind_real) - in<br><b>lon_e</b> :  Second point longitude - real(kind_real) - in<br><b>lat_e</b> :  Second point latitude - real(kind_real) - in<br><b>valid</b> :  True for valid arcs - logical - out |
| subroutine | [geom_copy_c0a_to_mga_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1558) | copy from subset Sc0 to model grid, halo A, single field | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - in<br><b>fld_mga</b> :  Field on model grid, halo A - real(kind_real) - out |
| subroutine | [geom_copy_c0a_to_mga_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1598) | copy from subset Sc0 to model grid, halo A, all fields | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - in<br><b>fld_mga</b> :  Field on model grid, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_real_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1621) | copy from model grid to subset Sc0, halo A, real, single field | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>fld_mga</b> :  Field on model grid, halo A - real(kind_real) - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_real_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1656) | copy from model grid to subset Sc0, halo A, real, all fields | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>fld_mga</b> :  Field on model grid, halo A - real(kind_real) - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_copy_mga_to_c0a_logical_single](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1679) | copy from model grid to subset Sc0, halo A, logical, single field | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>fld_mga</b> :  Field on model grid, halo A - logical - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - logical - out |
| subroutine | [geom_copy_mga_to_c0a_logical_all](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1721) | copy from model grid to subset Sc0, halo A, logical, all fields | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>fld_mga</b> :  Field on model grid, halo A - logical - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - logical - out |
| subroutine | [geom_fieldset_to_c0](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1745) | fieldset to Fortran array on subset Sc0 | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>fieldset</b> :  Fieldset - type(fieldset_type) - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - out |
| subroutine | [geom_c0_to_fieldset](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1782) | Fortran array on subset Sc0 to fieldset | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>fld_c0a</b> :  Field on subset Sc0, halo A - real(kind_real) - in<br><b>fieldset</b> :  Fieldset - type(fieldset_type) - inout |
| subroutine | [geom_compute_deltas](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1822) | compute deltas for LCT definition | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>ic0u</b> :  First horizontal index, universe - integer - in<br><b>il0</b> :  First vertical index - integer - in<br><b>jc0u</b> :  Second horizontal index, universe - integer - in<br><b>jl0</b> :  Second vertical index - integer - in<br><b>dx</b> :  Longitude delta - real(kind_real) - out<br><b>dy</b> :  Latitude delta - real(kind_real) - out<br><b>dz</b> :  Altitude delta - real(kind_real) - out |
| subroutine | [geom_rand_point](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1848) | select random valid point on the horizontal grid | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>rng</b> :  Random number generator - type(rng_type) - inout<br><b>il0</b> :  Level - integer - in<br><b>iproc</b> :  Processor - integer - out<br><b>ic0a</b> :  Local index - integer - out<br><b>nr</b> :  Number of random tries - integer - out |
| function | [geom_mg_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1888) | conversion from global to processor on model grid | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>img</b> :  Global index - integer - in |
| function | [geom_c0_to_c0a](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1910) | conversion from global to halo A on subset Sc0 | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>ic0</b> :  Global index - integer - in |
| function | [geom_c0_to_proc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1936) | conversion from global to processor on subset Sc0 | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>ic0</b> :  Global index - integer - in |
| function | [geom_c0_to_c0u](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_geom.F90#L1958) | conversion from global to universe on subset Sc0 | <b>geom</b> :  Geometry - class(geom_type) - in<br><b>ic0</b> :  Global index - integer - in |
