# Module type_vbal_blk

| Type | Name | Purpose | Arguments          |
| :--: | :--: | :------ | :----------------- |
| subroutine | [vbal_blk_alloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L58) | allocation | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>geom</b> :  Geometry - type(geom_type) - in<br><b>nc2b</b> :  Subset Sc2 size, halo B - integer - in<br><b>iv</b> :  First variable index - integer - in<br><b>jv</b> :  Second variable index - integer - in |
| subroutine | [vbal_blk_partial_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L82) | release memory (partial) | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - inout |
| subroutine | [vbal_blk_dealloc](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L100) | release memory (full) | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - inout |
| subroutine | [vbal_blk_compute_covariances](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L123) | compute auto- and cross-covariances | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - in<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>geom</b> :  Geometry - type(geom_type) - in<br><b>samp</b> :  Sampling - type(samp_type) - in<br><b>ens</b> :  Ensemble - type(ens_type) - in<br><b>auto</b> :  Auto-covariance - real(kind_real) - out<br><b>cross</b> :  Cross-covariance - real(kind_real) - out |
| subroutine | [vbal_blk_compute_regression](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L219) | compute regression | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - inout<br><b>mpl</b> :  MPI data - type(mpl_type) - inout<br><b>nam</b> :  Namelist - type(nam_type) - in<br><b>geom</b> :  Geometry - type(geom_type) - in<br><b>samp</b> :  Sampling - type(samp_type) - in<br><b>nsub</b> :  Number of sub-ensembles - integer - in<br><b>auto</b> :  Auto-covariance - real(kind_real) - in<br><b>cross</b> :  Cross-covariance - real(kind_real) - in<br><b>ic2b</b> :  Index - integer - in |
| subroutine | [vbal_blk_apply](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L332) | apply vertical balance block | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - in<br><b>geom</b> :  Geometry - type(geom_type) - in<br><b>h_n_s</b> :  Number of neighbors for the horizontal interpolation - integer - in<br><b>h_c2b</b> :  Index of neighbors for the horizontal interpolation - integer - in<br><b>h_S</b> :  Weight of neighbors for the horizontal interpolation - real(kind_real) - in<br><b>fld</b> :  Source/destination vector - real(kind_real) - inout |
| subroutine | [vbal_blk_apply_ad](https://github.com/JCSDA/saber/tree/develop/src/saber/bump/type_vbal_blk.F90#L376) | apply adjoint vertical balance block | <b>vbal_blk</b> :  Vertical balance block - class(vbal_blk_type) - in<br><b>geom</b> :  Geometry - type(geom_type) - in<br><b>h_n_s</b> :  Number of neighbors for the horizontal interpolation - integer - in<br><b>h_c2b</b> :  Index of neighbors for the horizontal interpolation - integer - in<br><b>h_S</b> :  Weight of neighbors for the horizontal interpolation - real(kind_real) - in<br><b>fld</b> :  Source/destination vector - real(kind_real) - inout |
